<html>
<head>
	<title>CORS Test</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

	<script>
var _url = "localhost:8080/alfresco/service/slingshot/doclib2/node/workspace/SpacesStore/1a0b110f-1e09-4ca2-b367-fe25e4964a4e";

function make_base_auth(user, password) {
  var tok = user + ':' + password;
  var hash = btoa(tok);
  return "Basic " + hash;
}

function getTest(){
$.ajax
  ({
    type: "GET",
    url: _url,
    dataType: 'json',
    async: false,
    data: '{}',
    beforeSend: function (xhr){ 
         xhr.setRequestHeader('Authorization', make_base_auth("admin", "admin")); 
    },
    success: function (response, statusText, jqXHR){
        alert(statusText); 
    },
    failure: function (response, statusText, jqXHR) {
        alert(statusText);
    }
})};


/*function postTest(){
$.ajax
  ({
    type: "POST",
    url: _url2,
    contentType: 'application/atom+xml', 
    dataType: 'xml',
    async: false,
    data: '<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:cmisra="http://docs.oasis-open.org/ns/cmis/restatom/200908/" xmlns:cmis="http://docs.oasis-open.org/ns/cmis/core/200908/" ><title>test.txt</title><summary>Test File</summary><content type="text/plain">This is a test</content><cmisra:object><cmis:properties><cmis:propertyId propertyDefinitionId="cmis:objectTypeId"><cmis:value>cmis:document</cmis:value></cmis:propertyId></cmis:properties></cmisra:object></entry>',
    beforeSend: function (xhr){ 
         xhr.setRequestHeader('Authorization', make_base_auth(username, password)); 
    },
    success: function (response, statusText, jqXHR){
        alert(statusText); 
    },
    failure: function (response, statusText, jqXHR) {
        alert("failure " + statusText);
    }
})}; */

</script>
</head>
<body>
<h1>CORS Test Suite</h1>
<div>
<form >
<!--<label for="cloudURL">Cloud Server URL</label>&nbsp;<input id="cloudURL" name="cloudURL" type="text" /> <br />
<label for="network">Network</label>&nbsp;<input id="network" name="network" type="text" /> <br /> 
<label for="username">Username</label>&nbsp;<input id="username" name="username" type="text" /> <br />
<label for="password">Password</label>&nbsp;<input id="password" name="password" type="password" /> <br />-->
<input id="submit" type="submit" value="Run" />
</form>

<script>

//$('#cloudURL').val(getURLParameter('cloudURL'));
//$('#username').val(getURLParameter('username'));
//$('#password').val(getURLParameter('password'));

 $("form").submit (function () {
 
 		           getTest(); 
      	/*if ($("input:#cloudURL").val() != "") {
           getTest(); 
	   postTest();
        }*/
 } );

</script>
</div>

<div id="test1">
</div>
<div id="test2">
</div>

</body>
</head>
